<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/blog/images/logo.svg" color="#222">

<link rel="stylesheet" href="/blog/css/main.css">


<link rel="stylesheet" href="/blog/lib/font-awesome/css/all.min.css">
  
  <link rel="stylesheet" href="/blog/lib/animate-css/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"rcore-os.github.io","root":"/blog/","scheme":"Muse","version":"8.0.0-rc.4","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}}};
  </script>

  <meta name="description" content="2022开源操作系统夏令营总结-翟启明 repo:https:&#x2F;&#x2F;github.com&#x2F;jackming2271">
<meta property="og:type" content="article">
<meta property="og:title" content="2022开源操作系统夏令营总结-翟启明">
<meta property="og:url" content="http://rcore-os.github.io/blog/2022/08/01/2022%E5%BC%80%E6%BA%90%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8F%E4%BB%A4%E8%90%A5%E6%80%BB%E7%BB%93-%E7%BF%9F%E5%90%AF%E6%98%8E/index.html">
<meta property="og:site_name" content="rcore-os Blog">
<meta property="og:description" content="2022开源操作系统夏令营总结-翟启明 repo:https:&#x2F;&#x2F;github.com&#x2F;jackming2271">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://rcore-os.github.io/blog/.io//2022/08/01/2022%E5%BC%80%E6%BA%90%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8F%E4%BB%A4%E8%90%A5%E6%80%BB%E7%BB%93-%E7%BF%9F%E5%90%AF%E6%98%8E/sv39-pte.png">
<meta property="article:published_time" content="2022-08-01T10:45:10.000Z">
<meta property="article:modified_time" content="2025-05-18T05:08:06.765Z">
<meta property="article:author" content="rcore-os Group">
<meta property="article:tag" content="rcore-lab">
<meta property="article:tag" content="summerofcode2022">
<meta property="article:tag" content="author:jackming2271">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://rcore-os.github.io/blog/.io//2022/08/01/2022%E5%BC%80%E6%BA%90%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8F%E4%BB%A4%E8%90%A5%E6%80%BB%E7%BB%93-%E7%BF%9F%E5%90%AF%E6%98%8E/sv39-pte.png">

<link rel="canonical" href="http://rcore-os.github.io/blog/2022/08/01/2022%E5%BC%80%E6%BA%90%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8F%E4%BB%A4%E8%90%A5%E6%80%BB%E7%BB%93-%E7%BF%9F%E5%90%AF%E6%98%8E/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>2022开源操作系统夏令营总结-翟启明 | rcore-os Blog</title>
  






  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <main class="main">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader">
        <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
        <span class="toggle-line toggle-line-first"></span>
        <span class="toggle-line toggle-line-middle"></span>
        <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">rcore-os Blog</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/blog/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/blog/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <section class="post-toc-wrap sidebar-panel">
          <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#第一阶段总结"><span class="nav-number">1.</span> <span class="nav-text">第一阶段总结</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#学习过程"><span class="nav-number">1.1.</span> <span class="nav-text">学习过程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#学习路线"><span class="nav-number">1.1.1.</span> <span class="nav-text">学习路线</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#学习氛围"><span class="nav-number">1.1.2.</span> <span class="nav-text">学习氛围</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#个人成长"><span class="nav-number">1.2.</span> <span class="nav-text">个人成长</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#操作系统"><span class="nav-number">1.2.1.</span> <span class="nav-text">操作系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#知识领域"><span class="nav-number">1.2.2.</span> <span class="nav-text">知识领域</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#建议"><span class="nav-number">1.3.</span> <span class="nav-text">建议</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#感受"><span class="nav-number">1.4.</span> <span class="nav-text">感受</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第一阶段实验报告"><span class="nav-number">1.5.</span> <span class="nav-text">第一阶段实验报告</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Lab1-Ch3"><span class="nav-number">2.</span> <span class="nav-text">Lab1-Ch3</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#功能总结"><span class="nav-number">2.1.</span> <span class="nav-text">功能总结</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#问答题"><span class="nav-number">2.2.</span> <span class="nav-text">问答题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#对本次实验设计及难度-工作量的看法，以及有哪些需要改进的地方"><span class="nav-number">2.3.</span> <span class="nav-text">对本次实验设计及难度&#x2F;工作量的看法，以及有哪些需要改进的地方</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Lab2-Ch4"><span class="nav-number">3.</span> <span class="nav-text">Lab2-Ch4</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#功能总结-1"><span class="nav-number">3.1.</span> <span class="nav-text">功能总结</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#问答总结"><span class="nav-number">3.2.</span> <span class="nav-text">问答总结</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#对本次实验设计及难度-工作量的看法，以及有哪些需要改进的地方-1"><span class="nav-number">3.3.</span> <span class="nav-text">对本次实验设计及难度&#x2F;工作量的看法，以及有哪些需要改进的地方</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Lab3-Ch5"><span class="nav-number">4.</span> <span class="nav-text">Lab3-Ch5</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#功能总结-2"><span class="nav-number">4.1.</span> <span class="nav-text">功能总结</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#问答总结-1"><span class="nav-number">4.2.</span> <span class="nav-text">问答总结</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#对本次实验设计及难度-工作量的看法，以及有哪些需要改进的地方-2"><span class="nav-number">4.3.</span> <span class="nav-text">对本次实验设计及难度&#x2F;工作量的看法，以及有哪些需要改进的地方</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Lab4-Ch6"><span class="nav-number">5.</span> <span class="nav-text">Lab4-Ch6</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#功能总结-3"><span class="nav-number">5.1.</span> <span class="nav-text">功能总结</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#问答总结-2"><span class="nav-number">5.2.</span> <span class="nav-text">问答总结</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#你对本次实验设计及难度-工作量的看法，以及有哪些需要改进的地方，欢迎畅所欲言"><span class="nav-number">5.3.</span> <span class="nav-text">你对本次实验设计及难度&#x2F;工作量的看法，以及有哪些需要改进的地方，欢迎畅所欲言</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Ch7"><span class="nav-number">6.</span> <span class="nav-text">Ch7</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#功能总结-4"><span class="nav-number">6.1.</span> <span class="nav-text">功能总结</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#问答总结-3"><span class="nav-number">6.2.</span> <span class="nav-text">问答总结</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Lab5-Ch8"><span class="nav-number">7.</span> <span class="nav-text">Lab5-Ch8</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#功能总结-5"><span class="nav-number">7.1.</span> <span class="nav-text">功能总结</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#问答总结-4"><span class="nav-number">7.2.</span> <span class="nav-text">问答总结</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#你对本次实验设计及难度-工作量的看法，以及有哪些需要改进的地方，欢迎畅所欲言-1"><span class="nav-number">7.3.</span> <span class="nav-text">你对本次实验设计及难度&#x2F;工作量的看法，以及有哪些需要改进的地方，欢迎畅所欲言</span></a></li></ol></li></ol></div>
      </section>
      <!--/noindex-->

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">rcore-os Group</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/blog/archives/">
        
          <span class="site-state-item-count">679</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/blog/categories/">
          
        <span class="site-state-item-count">47</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/blog/tags/">
          
        <span class="site-state-item-count">582</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </section>
    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </header>

      
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div id="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


      <div class="main-inner">
        

        <div class="content post posts-expand">
          

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://rcore-os.github.io/blog/2022/08/01/2022%E5%BC%80%E6%BA%90%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8F%E4%BB%A4%E8%90%A5%E6%80%BB%E7%BB%93-%E7%BF%9F%E5%90%AF%E6%98%8E/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="rcore-os Group">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="rcore-os Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          2022开源操作系统夏令营总结-翟启明
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-08-01 10:45:10" itemprop="dateCreated datePublished" datetime="2022-08-01T10:45:10+00:00">2022-08-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-05-18 05:08:06" itemprop="dateModified" datetime="2025-05-18T05:08:06+00:00">2025-05-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/report/" itemprop="url" rel="index"><span itemprop="name">report</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>2022开源操作系统夏令营总结-翟启明</p>
<p>repo:<a href="https://github.com/jackming2271" target="_blank" rel="noopener">https://github.com/jackming2271</a></p>
<a id="more"></a>

<h1 id="第一阶段总结"><a href="#第一阶段总结" class="headerlink" title="第一阶段总结"></a>第一阶段总结</h1><h2 id="学习过程"><a href="#学习过程" class="headerlink" title="学习过程"></a>学习过程</h2><h3 id="学习路线"><a href="#学习路线" class="headerlink" title="学习路线"></a>学习路线</h3><ul>
<li>耗时: 3周+(平均每天3小时左右)</li>
<li>学习路线: 基本按照Schedule的指导</li>
<li>目前进度: 完成全部Lab与Report</li>
</ul>
<p>首先是学习过程</p>
<p>在学习的过程中, 得益于全面的各种参考资料以及完善的工具链, 我用了3周多的时间, 按照Schedule的指导, 基本顺利完成Lab1~5以及对应的实验报告. 我的主要学习路径就是阅读指导书 以及 更全面的rCore-Tutorial-Book-v3 , 学习过程中整理学习笔记, 对于理解不清晰的模块会仔细梳理代码逻辑直到过程清晰. 在写实验报告的时候再回顾一下整章代码架构, 以及相对于上一章的进化, 这样学习下来对于一章内的知识就有了比较好的把握, 同时也能将内核的演进串联起来</p>
<h3 id="学习氛围"><a href="#学习氛围" class="headerlink" title="学习氛围"></a>学习氛围</h3><ul>
<li>技术氛围浓厚</li>
<li>同学热心互助</li>
<li>目标一致</li>
</ul>
<p>另外, 各位同学间互相交流的氛围非常好, 大家兴趣驱动&amp;目标一致,个人提出的多个问题问题都得到了积极回复与解决, 也从其他同学提出的问题和相关答复中学到了很多;</p>
<h2 id="个人成长"><a href="#个人成长" class="headerlink" title="个人成长"></a>个人成长</h2><h3 id="操作系统"><a href="#操作系统" class="headerlink" title="操作系统"></a>操作系统</h3><ul>
<li>从理论到实践, 从黑盒到白盒</li>
<li>软件开发能力提升</li>
<li>底层思维</li>
</ul>
<p>接下来是个人成长方面:</p>
<p>在操作系统方面:</p>
<ul>
<li>浅知理论和(在深入理解的基础上)动手实践是完全不同的感受, 在学习完成内核中一个个功能的具体实现之后, 个人对于操作系统的理解也不断拓展和深入, 之前不理解的一些问题(如实现虚拟内存是如何软硬协作的, 硬盘是如何完成数据存储的等)也都迎刃而解; </li>
<li>在编写各种用户态程序时能从更深的维度思考如何更高效使用CPU/存储, 更清晰的使用多进程/多线程机制实现程序; 在程序异常如core分析/内存泄露等时能从操作系统的角度出发分析问题; </li>
</ul>
<h3 id="知识领域"><a href="#知识领域" class="headerlink" title="知识领域"></a>知识领域</h3><ul>
<li>Rust / Risc-V / 硬件</li>
</ul>
<p>在知识领域方面:<br>个人的工作方向主要是后端研发和数据分析, 日常接触到的没有那么底层, 对于通过本次学习学习了一个新的领域, 了解了操作系统开发, 接触很多新技术如RUST语言 / RISC-V汇编 / 硬件机制等, 让自己在编程语言和体系结构等方向的能力也得到了拓展</p>
<h2 id="建议"><a href="#建议" class="headerlink" title="建议"></a>建议</h2><ul>
<li>全流程效能提升</li>
<li>多分享交流</li>
</ul>
<p>优秀的项目是靠大家一起打磨出来的, 在开发/编译/调试/测试的任何阶段的优化,都会带来全流程的效能提升, 学习或完成实验的过程中如果发现可以优化的地方, 可以多抛出问题多交流, 共同优化提升整体效能</p>
<h2 id="感受"><a href="#感受" class="headerlink" title="感受"></a>感受</h2><ul>
<li>感受到操作系统的深邃</li>
<li>计算机基础 &amp; 编程语言提升, 收获满满</li>
<li>获得成长 &amp; 反馈社区</li>
</ul>
<p>参与第一阶段的项目让我感受到了操作系统的复杂与优美, 也让我编程语言和计算机基础知识的掌握程度得到了很大提升, 同时加强了自身的软件开发能力, 感谢各位老师助教提供的宝贵机会, 未来将和大家继续努力学习&amp;反馈社区</p>
<h2 id="第一阶段实验报告"><a href="#第一阶段实验报告" class="headerlink" title="第一阶段实验报告"></a>第一阶段实验报告</h2><p>本报告为个人在参与 <strong><a href="https://github.com/LearningOS/rust-based-os-comp2022/blob/main/scheduling.md" target="_blank" rel="noopener">2022年开源操作系统训练营</a></strong> 期间完成, 主要包括 6 个实验报告(对应 <a href="https://learningos.github.io/rust-based-os-comp2022/index.html" target="_blank" rel="noopener">指导文档</a> 中ch3~8), 内容涉及了操作系统中的 <strong>特权级切换/进程调度/虚拟内存管理/多线程分析等</strong> 重点知识.</p>
<h1 id="Lab1-Ch3"><a href="#Lab1-Ch3" class="headerlink" title="Lab1-Ch3"></a>Lab1-Ch3</h1><h2 id="功能总结"><a href="#功能总结" class="headerlink" title="功能总结"></a>功能总结</h2><p><strong>实现了sys_task_info系统调用,可以获取当前进程的 运行状态/运行时长/每种系统调用的使用次数</strong></p>
<ul>
<li>运行状态: 由于只能查询当前任务, 所以任务状态只能为 Running</li>
<li>运行时长: 在TaskControlBlock中记录开始运行的时间戳, 查询时使用 (当前时间 - 开始时间) 获取运行时长</li>
<li>系统调用的使用次数: 在中断转发时,转发前一刻将系统调用使用次数+1<h2 id="问答题"><a href="#问答题" class="headerlink" title="问答题"></a>问答题</h2></li>
</ul>
<ol>
<li>正确进入 U 态后，程序的特征还应有：使用 S 态特权指令，访问 S 态寄存器后会报错。 请同学们可以自行测试这些内容 (运行 Rust 三个 bad 测例 (ch2b_bad_*.rs) ， 注意在编译时至少需要指定 LOG=ERROR 才能观察到内核的报错信息) ， 描述程序出错行为，同时注意注明你使用的 sbi 及其版本。</li>
</ol>
<p><strong>在低特权级使用更高特权级的指令 / 访问非法地址等都会触发异常,出core</strong><br>[ERROR] [kernel] PageFault in application, bad addr = 0x0, bad instruction = 0x80400408, core dumped.<br>[ERROR] [kernel] IllegalInstruction in application, core dumped.<br>[ERROR] [kernel] IllegalInstruction in application, core dumped.  </p>
<ol start="2">
<li>深入理解 trap.S 中两个函数 __alltraps 和 __restore 的作用，并回答如下问题:</li>
</ol>
<ul>
<li><p>L40：刚进入 __restore 时，a0 代表了什么值。请指出 __restore 的两种使用情景。<br>a0 寄存器放置函数返回值, a0中的地址是 trap_handler 的返回值, 指向任务内核栈上的trap_context的地址<br>两种使用场景: 完成中断处理后返回用户态继续执行 / 首次被调度为Running时进入用户态</p>
</li>
<li><p>L46-L51：这几行汇编代码特殊处理了哪些寄存器？这些寄存器的的值对于进入用户态有何意义？请分别解释。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ld t0, 32*8(sp)</span><br><span class="line">ld t1, 33*8(sp)</span><br><span class="line">ld t2, 2*8(sp)</span><br><span class="line">csrw sstatus, t0 &#x2F;&#x2F; 记录中断发生前的许多信息如特权级等</span><br><span class="line">csrw sepc, t1 &#x2F;&#x2F; 系统调用返回用户态时从何处开始执行 or 异常代码发生的位置</span><br><span class="line">csrw sscratch, t2 &#x2F;&#x2F; 保存内核栈位置</span><br></pre></td></tr></table></figure>
</li>
<li><p>L53-L59：为何跳过了 x2 和 x4？<br>x2: x2即为sp寄存器, 其实已经保存到sscratch了<br>x4: 使用不到,不用保存</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ld x1, 1*8(sp)</span><br><span class="line">ld x3, 3*8(sp)</span><br><span class="line">.set n, 5</span><br><span class="line">.rept 27</span><br><span class="line">   LOAD_GP %n</span><br><span class="line">   .set n, n+1</span><br><span class="line">.endr</span><br></pre></td></tr></table></figure></li>
<li><p>L63：该指令( csrrw sp, sscratch, sp )之后，sp 和 sscratch 中的值分别有什么意义？<br>sp 和 sscratch 分别指向 内核栈/用户栈 其中的一个和另一个, 执行之后他们的指向发生交换, 此处sp指向用户栈, sscratch指向进程内核栈</p>
</li>
<li><p>__restore：中发生状态切换在哪一条指令？为何该指令执行之后会进入用户态？<br>sret指令;指令执行后:CPU 会将当前的特权级按照 sstatus 的 SPP 字段设置为 U 或者 S ；CPU 会跳转到 sepc 寄存器指向的那条指令，然后继续执行。</p>
</li>
<li><p>L13：该指令( csrrw sp, sscratch, sp )之后，sp 和 sscratch 中的值分别有什么意义？<br>sp 和 sscratch 分别指向 内核栈/用户栈 其中的一个和另一个, 执行之后他们的指向发生交换, 此处sscratch指向用户栈, sp指向进程内核栈</p>
</li>
<li><p>从 U 态进入 S 态是哪一条指令发生的？<br>ecall</p>
<h2 id="对本次实验设计及难度-工作量的看法，以及有哪些需要改进的地方"><a href="#对本次实验设计及难度-工作量的看法，以及有哪些需要改进的地方" class="headerlink" title="对本次实验设计及难度/工作量的看法，以及有哪些需要改进的地方"></a>对本次实验设计及难度/工作量的看法，以及有哪些需要改进的地方</h2><p>难度适中,对于起步正好合适</p>
</li>
</ul>
<h1 id="Lab2-Ch4"><a href="#Lab2-Ch4" class="headerlink" title="Lab2-Ch4"></a>Lab2-Ch4</h1><h2 id="功能总结-1"><a href="#功能总结-1" class="headerlink" title="功能总结"></a>功能总结</h2><p>实现了 mmap 和 munmap 系统调用, 提供了在用户态动态申请物理内存的接口  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;&#x2F; 申请长度为 len 字节的物理内存（不要求实际物理内存位置，可以随便找一块），将其映射到 start 开始的虚存，内存页属性为 port</span><br><span class="line">fn sys_mmap(start: usize, len: usize, port: usize) -&gt; isize</span><br><span class="line">&#x2F;&#x2F;&#x2F; 取消到 [start, start + len) 虚存的映射</span><br><span class="line">fn sys_munmap(start: usize, len: usize) -&gt; isize</span><br></pre></td></tr></table></figure>
<p>mmap实现方法: 通过memory_space的insert_framed_area方法, 每次mmap请求都尝试插入一个area<br>munmap实现方法: 通过遍历当前memory_space下所有area维护的映射, 如果虚拟页面落在在本次要拆除映射的区间, 则进行拆除操作</p>
<h2 id="问答总结"><a href="#问答总结" class="headerlink" title="问答总结"></a>问答总结</h2><ol>
<li><p>请列举 SV39 页表页表项的组成，描述其中的标志位有何作用?  </p>
 <img src="/blog/.io//2022/08/01/2022%E5%BC%80%E6%BA%90%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8F%E4%BB%A4%E8%90%A5%E6%80%BB%E7%BB%93-%E7%BF%9F%E5%90%AF%E6%98%8E/sv39-pte.png" class title="sv39模式页表项">
<ul>
<li>V 位决定了该页表项的其余部分是否有效（V = 1 时有效）。若 V = 0，则任何遍历到此页表项的虚址转换操作都会导致页错误。</li>
<li>R、W 和 X 位分别表示此页是否可以读取、写入和执行。如果这三个位都是 0，那么这个页表项是指向下一级页表的指针，否则它是页表树的一个叶节点。</li>
<li>U 位表示该页是否是用户页面。若 U = 0，则 U 模式不能访问此页面，但 S 模式可以。若 U = 1，则 U 模式下能访问这个页面，而 S 模式不能。</li>
<li>G 位表示这个映射是否对所有虚址空间有效，硬件可以用这个信息来提高地址转换的性能。这一位通常只用于属于操作系统的页面。</li>
<li>A 位表示自从上次 A 位被清除以来，该页面访问过。</li>
<li>D 位表示自从上次清除 D 位以来页面是否被弄脏（例如被写入）。</li>
<li>RSW 域留给操作系统使用，它会被硬件忽略。</li>
<li>PPN 域包含物理页号，这是物理地址的一部分。若这个页表项是一个叶节点，那么 PPN 是转换后物理地址的一部分。否则 PPN 给出下一节页表的地址。</li>
</ul>
</li>
<li><p>缺页</p>
</li>
</ol>
<blockquote>
<p>缺页异常是一种正在运行的程序访问当前未由内存管理单元（MMU）映射到虚拟内存的页面时，由计算机硬件引发的异常类型。访问未被映射的页或访问权限不足，都会导致该类异常的发生。处理缺页异常通常是操作系统内核的一部分。当处理缺页异常时，操作系统将尝试使所需页面在物理内存中的位置变得可访问（建立新的映射关系到虚拟内存）。而如果在非法访问内存的情况下，即发现触发Page Fault的虚拟内存地址(Bad Address)不在当前进程 vm_area_struct链表中所定义的允许访问的虚拟内存地址范围内，或访问位置的权限条件不满足时，缺页异常处理将终止该程序的继续运行。</p>
</blockquote>
<ul>
<li><p>请问哪些异常可能是缺页导致的？<br>  当系统运行发生异常时，可即时地通过解析csr scause寄存器的值，识别如下三种不同的Page Fault</p>
<p>  Exception Code = 12: page fault caused by an instruction fetch<br>  Exception Code = 13: page fault caused by a read<br>  Exception Code = 15: page fault caused by a write  </p>
</li>
<li><p>发生缺页时，描述相关重要寄存器的值，上次实验描述过的可以简略.<br>  八个控制状态寄存器（CSR）是机器模式(M态)下异常处理的必要部分：</p>
<ul>
<li><p>mtvec（Machine Trap Vector）它保存发生异常时处理器需要跳转到的地址。</p>
</li>
<li><p>mepc（Machine Exception PC）它指向发生异常的指令。</p>
</li>
<li><p>mcause（Machine Exception Cause）它指示发生异常的种类。</p>
</li>
<li><p>mie（Machine Interrupt Enable）它指出处理器目前能处理和必须忽略的中断。</p>
</li>
<li><p>mip（Machine Interrupt Pending）它列出目前正准备处理的中断。</p>
</li>
<li><p>mtval（Machine Trap Value）它保存了陷入（trap）的附加信息：地址exception中出错的地址、发生非法指令exception的指令本身，对于其他异常，它的值为 0。</p>
</li>
<li><p>mscratch（Machine Scratch）它暂时存放一个字大小的数据。</p>
</li>
<li><p>mstatus（Machine Status）它保存全局中断使能，以及许多其他的状态</p>
<p>S 模式有几个异常处理 CSR：sepc、stvec、scause、sscratch、stval 和 sstatus，它们执行与 M 模式 CSR 同的功能。监管者异常返回指令 sret 与 mret 的行为相同，但它作用于 S 模式的异常处理CSR，而不是 M 模式的 CSR。S 模式处理例外的行为已和 M 模式非常相似。如果 hart 接受了异常并且把它委派给了S 模式，则硬件会原子地经历几个类似的状态转换，其中用到了 S 模式而不是 M 模式的CSR:</p>
</li>
<li><p>发生例外的指令的 PC 被存入 sepc，且 PC 被设置为 stvec。</p>
</li>
<li><p>scause 根据异常类型设置值，stval 被设置成出错的地址或者其它特定异常的信息字。</p>
</li>
<li><p>把 sstatus CSR 中的 SIE 置零，屏蔽中断，且 SIE 之前的值被保存在 SPIE 中。</p>
</li>
<li><p>发生exception时的权限模式被保存在 sstatus 的 SPP 域，然后设置当前模式为 S 模式。</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>缺页有两个常见的原因，其一是 Lazy 策略，也就是直到内存页面被访问才实际进行页表操作。 比如，一个程序被执行时，进程的代码段理论上需要从磁盘加载到内存。但是 os 并不会马上这样做， 而是会保存 .text 段在磁盘的位置信息，在这些代码第一次被执行时才完成从磁盘的加载操作。这样做有哪些好处？<br>  基于此机制, 程序开始运行时并不需要将全部内容加载到内存, 也就是说在 程序运行的机器的实际物理内存 小于 进程运行所需总内存时, 程序依然能够通过页面的换入换出机制运行起来; </li>
</ul>
<blockquote>
<p>其实，我们的 mmap 也可以采取 Lazy 策略，比如：一个用户进程先后申请了 10G 的内存空间， 然后用了其中 1M 就直接退出了。按照现在的做法，我们显然亏大了，进行了很多没有意义的页表操作。</p>
</blockquote>
<ul>
<li><p>处理 10G 连续的内存页面，对应的 SV39 页表大致占用多少内存 (估算数量级即可)？<br>  10G / 512</p>
</li>
<li><p>请简单思考如何才能实现 Lazy 策略，缺页时又如何处理？描述合理即可，不需要考虑实现。<br>  不考虑局部性的情况下, 使用lazy策略时, 根据发生缺页异常的类型, 去memory_set的各个段寻找 [缺页的虚拟地址在当前逻辑段 &amp;&amp; 逻辑段权限达到缺页的要求], 如果寻找成功, 则将页面加载到物理内存并映射;</p>
</li>
<li><p>缺页的另一个常见原因是 swap 策略，也就是内存页面可能被换到磁盘上了，导致对应页面失效。此时页面失效如何表现在页表项(PTE)上？<br>  V权限位为0<br>双页表与单页表</p>
</li>
</ul>
<ol start="3">
<li>为了防范侧信道攻击，我们的 os 使用了双页表。但是传统的设计一直是单页表的，也就是说， 用户线程和对应的内核线程共用同一张页表，只不过内核对应的地址只允许在内核态访问。 (备注：这里的单/双的说法仅为自创的通俗说法，并无这个名词概念，详情见 KPTI )</li>
</ol>
<ul>
<li><p>在单页表情况下，如何更换页表？<br>  切换任务后, 返回用户态时重写sntp</p>
</li>
<li><p>单页表情况下，如何控制用户态无法访问内核页面？（tips:看看上一题最后一问）<br>  内核对应的地址只允许在内核态访问, PTE 的 U = 0</p>
</li>
<li><p>单页表有何优势？（回答合理即可）<br>  用户态和内核态切换时不用更换页表</p>
</li>
<li><p>双页表实现下，何时需要更换页表？假设你写一个单页表操作系统，你会选择何时更换页表（回答合理即可）？<br>  用户态和内核态切换时; 在返回用户态时 or 任务切换时, 因为内核部分都是一样的;</p>
</li>
</ul>
<h2 id="对本次实验设计及难度-工作量的看法，以及有哪些需要改进的地方-1"><a href="#对本次实验设计及难度-工作量的看法，以及有哪些需要改进的地方-1" class="headerlink" title="对本次实验设计及难度/工作量的看法，以及有哪些需要改进的地方"></a>对本次实验设计及难度/工作量的看法，以及有哪些需要改进的地方</h2><pre><code>难点在于理解虚拟内存, 实验代码基于现有框架难度不大. 希望能有Lazy策略 和 Swap策略的实现学习 orz</code></pre><h1 id="Lab3-Ch5"><a href="#Lab3-Ch5" class="headerlink" title="Lab3-Ch5"></a>Lab3-Ch5</h1><h2 id="功能总结-2"><a href="#功能总结-2" class="headerlink" title="功能总结"></a>功能总结</h2><p>spwan系统调用<br>新建子进程，使其执行目标程序 (从结果来看是等于Fork + Exec, 但是过程是不同的)<br>实现思路: 整体过程基本与task::new()的过程相同</p>
<p><a href="https://en.wikipedia.org/wiki/Stride_scheduling" target="_blank" rel="noopener"> stride 优先级调度算法 </a>   </p>
<p>基于优先级的进程调度算法, 每个进程有一个优先级, 优先级越高执行频率越高<br>实现思路: 在TASK_MANAGER中每次选择stride最小的进程, 按照调度算法计算出步长(MAX_STRIDE / Priority), 然后进程stride加上这个值; 关于原理可以参看: <a href="https://blog.csdn.net/Anna__1997/article/details/88891432" target="_blank" rel="noopener">关于stride schedule很好的一个解释</a></p>
<h2 id="问答总结-1"><a href="#问答总结-1" class="headerlink" title="问答总结"></a>问答总结</h2><p><strong>stride 算法深入</strong></p>
<p>stride 算法原理非常简单，但是有一个比较大的问题。例如两个 stride = 10 的进程，使用 8bit 无符号整形储存 pass， p1.pass = 255, p2.pass = 250，在 p2 执行一个时间片后，理论上下一次应该 p1 执行。</p>
<ul>
<li>实际情况是轮到 p1 执行吗？为什么？<br>  不是, 250 + 10 = 260 , 无符号整数溢出后回转变为 4 (260 % 256) , 4 &lt; 255 , 所以 p2 继续执行</li>
</ul>
<p>我们之前要求进程优先级 &gt;= 2 其实就是为了解决这个问题。可以证明， 在不考虑溢出的情况下 , 在进程优先级全部 &gt;= 2 的情况下，如果严格按照算法执行，那么 PASS_MAX – PASS_MIN &lt;= BigStride / 2</p>
<ul>
<li>为什么？尝试简单说明（不要求严格证明）。<br>  每次增大的都是最小的, 每次增大的步幅小的进程调度的次数多, 每次增大的步幅大的进程调度的次数少  {% asset_img stride.png stride调度进程PASS值变化 %}


</li>
</ul>
<p>已知以上结论，考虑溢出的情况下，可以为 pass 设计特别的比较器，让 BinaryHeap<Pass> 的 pop 方法能返回真正最小的 Pass。补全下列代码中的 partial_cmp 函数，假设两个 Pass 永远不会相等。<br>TIPS: 使用 8 bits 存储 pass, BigStride = 255, 则: (125 &lt; 255) == false, (129 &lt; 255) == true.</Pass></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">use core::cmp::Ordering;</span><br><span class="line"></span><br><span class="line">struct Pass(u64);</span><br><span class="line"></span><br><span class="line">impl PartialOrd for Pass &#123;</span><br><span class="line">    fn partial_cmp(&amp;self, other: &amp;Self) -&gt; Option&lt;Ordering&gt; &#123;</span><br><span class="line">        </span><br><span class="line">        let cmp: i64 &#x3D; (self.0 - other.0) as i64; </span><br><span class="line">        if cmp &lt; 0 &#123;</span><br><span class="line">            Some(Ordering::Less)</span><br><span class="line">        &#125; else if cmp &#x3D;&#x3D; 0 &#123;</span><br><span class="line">            Some(Ordering::Equal)</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            Some(Ordering::Greater)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">impl PartialEq for Pass &#123;</span><br><span class="line">    fn eq(&amp;self, other: &amp;Self) -&gt; bool &#123;</span><br><span class="line">        false</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="对本次实验设计及难度-工作量的看法，以及有哪些需要改进的地方-2"><a href="#对本次实验设计及难度-工作量的看法，以及有哪些需要改进的地方-2" class="headerlink" title="对本次实验设计及难度/工作量的看法，以及有哪些需要改进的地方"></a>对本次实验设计及难度/工作量的看法，以及有哪些需要改进的地方</h2><pre><code>可以在练习部分多给出一些相关参考资料</code></pre><h1 id="Lab4-Ch6"><a href="#Lab4-Ch6" class="headerlink" title="Lab4-Ch6"></a>Lab4-Ch6</h1><h2 id="功能总结-3"><a href="#功能总结-3" class="headerlink" title="功能总结"></a>功能总结</h2><p>实现三个系统调用 sys_linkat、sys_unlinkat、sys_stat</p>
<ul>
<li>sys_linkat: 为现有的文件创建一个硬连接; 通过在FileSystem中添加一个name不同但是inode相同的目录项实现;</li>
<li>sys_unlinkat: 取消硬连接; 删除目录项; 如果删除后硬链接数量 = 0, 回收文件占用的资源;</li>
<li>sys_stat: 获取文件的各种信息如硬链接数量等</li>
</ul>
<h2 id="问答总结-2"><a href="#问答总结-2" class="headerlink" title="问答总结"></a>问答总结</h2><ol>
<li>在我们的easy-fs中，root inode起着什么作用？如果root inode中的内容损坏了，会发生什么？<br> root inode是根目录索引的inode, root inode 对应的数据区维护了所有的目录项;<br> 如果损坏目录项会丢失, 导致无法根据name对文件进行操作</li>
</ol>
<h2 id="你对本次实验设计及难度-工作量的看法，以及有哪些需要改进的地方，欢迎畅所欲言"><a href="#你对本次实验设计及难度-工作量的看法，以及有哪些需要改进的地方，欢迎畅所欲言" class="headerlink" title="你对本次实验设计及难度/工作量的看法，以及有哪些需要改进的地方，欢迎畅所欲言"></a>你对本次实验设计及难度/工作量的看法，以及有哪些需要改进的地方，欢迎畅所欲言</h2><h1 id="Ch7"><a href="#Ch7" class="headerlink" title="Ch7"></a>Ch7</h1><h2 id="功能总结-4"><a href="#功能总结-4" class="headerlink" title="功能总结"></a>功能总结</h2><p>本章无编程内容</p>
<h2 id="问答总结-3"><a href="#问答总结-3" class="headerlink" title="问答总结"></a>问答总结</h2><ol>
<li><p>举出使用 pipe 的一个实际应用的例子<br>netstat -nap | grep 80</p>
</li>
<li><p>如果需要在多个进程间互相通信，则需要为每一对进程建立一个管道，非常繁琐，请设计一个更易用的多进程通信机制<br> 消息队列, 共享内存等</p>
</li>
</ol>
<h1 id="Lab5-Ch8"><a href="#Lab5-Ch8" class="headerlink" title="Lab5-Ch8"></a>Lab5-Ch8</h1><h2 id="功能总结-5"><a href="#功能总结-5" class="headerlink" title="功能总结"></a>功能总结</h2><p>实现死锁检测功能. 目前的 mutex 和 semaphore 相关的系统调用不会分析资源的依赖情况，用户程序可能出现死锁。 我们希望在系统中加入死锁检测机制，当发现可能发生死锁时拒绝对应的资源获取请求.<br>注意此处的死锁检测和银行家算法(死锁避免算法)是不同的, 死锁检测是针对当前状态, 判断当前资源分配情况是否能让所有线程都继续运行(而不是每个都运行结束). 所以只基于每个线程对资源的请求(即 锁Lock or 信号量down), 来构造需求矩阵need / 维护alloc / 维护available , 就能完成判断了</p>
<h2 id="问答总结-4"><a href="#问答总结-4" class="headerlink" title="问答总结"></a>问答总结</h2><ol>
<li>在我们的多线程实现中，当主线程 (即 0 号线程) 退出时，视为整个进程退出， 此时需要结束该进程管理的所有线程并回收其资源。 <ul>
<li>需要回收的资源有哪些？<br>回收TaskUserRes相关(提前回收, 不然会释放两次, 因为drop在函数周期结束后才调用, 晚于memory_set.recycle_data_pages调用), 回收fd_table, 回收children </li>
<li>其他线程的 TaskControlBlock 可能在哪些位置被引用，分别是否需要回收，为什么？<br>可能在锁或者信号量等的数据结构上, 但是不用回收, 地址空间已回收, 子线程运行时会自动失败</li>
</ul>
</li>
</ol>
<ol start="2">
<li>对比以下两种 Mutex.unlock 的实现，二者有什么区别？这些区别可能会导致什么问题?<br> 如下第二种实现, 虽然将等待锁的线程重新开始调度, 但是锁并未释放, 会导致死锁<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"> 1 impl Mutex for Mutex1 &#123;  </span><br><span class="line"> 2    fn unlock(&amp;self) &#123;  </span><br><span class="line"> 3        let mut mutex_inner &#x3D; self.inner.exclusive_access();  </span><br><span class="line"> 4        assert!(mutex_inner.locked);  </span><br><span class="line"> 5        mutex_inner.locked &#x3D; false;  </span><br><span class="line"> 6        if let Some(waking_task) &#x3D; mutex_inner.wait_queue.pop_front() &#123;  </span><br><span class="line"> 7            add_task(waking_task);  </span><br><span class="line"> 8        &#125;  </span><br><span class="line"> 9    &#125;  </span><br><span class="line">10 &#125;  </span><br><span class="line">11  </span><br><span class="line">12 impl Mutex for Mutex2 &#123;  </span><br><span class="line">13    fn unlock(&amp;self) &#123;  </span><br><span class="line">14        let mut mutex_inner &#x3D; self.inner.exclusive_access();  </span><br><span class="line">15        assert!(mutex_inner.locked);  </span><br><span class="line">16        if let Some(waking_task) &#x3D; mutex_inner.wait_queue.pop_front() &#123;  </span><br><span class="line">17            add_task(waking_task);  </span><br><span class="line">18        &#125; else &#123;  </span><br><span class="line">19            mutex_inner.locked &#x3D; false;  </span><br><span class="line">20        &#125;  </span><br><span class="line">21    &#125;  </span><br><span class="line">22 &#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="你对本次实验设计及难度-工作量的看法，以及有哪些需要改进的地方，欢迎畅所欲言-1"><a href="#你对本次实验设计及难度-工作量的看法，以及有哪些需要改进的地方，欢迎畅所欲言-1" class="headerlink" title="你对本次实验设计及难度/工作量的看法，以及有哪些需要改进的地方，欢迎畅所欲言"></a>你对本次实验设计及难度/工作量的看法，以及有哪些需要改进的地方，欢迎畅所欲言</h2><pre><code>可以同时讲一下死锁避免和死锁检测</code></pre>
    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/blog/tags/rcore-lab/" rel="tag"># rcore-lab</a>
              <a href="/blog/tags/summerofcode2022/" rel="tag"># summerofcode2022</a>
              <a href="/blog/tags/author-jackming2271/" rel="tag"># author:jackming2271</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/blog/2022/08/01/2022%E5%BC%80%E6%BA%90%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AE%AD%E7%BB%83%E8%90%A5%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93/" rel="prev" title="2022开源操作系统训练营第一阶段总结">
      <i class="fa fa-chevron-left"></i> 2022开源操作系统训练营第一阶段总结
    </a></div>
      <div class="post-nav-item">
    <a href="/blog/2022/08/01/2022%E5%BC%80%E6%BA%90%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AE%AD%E7%BB%83%E8%90%A5%E6%80%BB%E7%BB%93-pickanameforlove-%E9%B9%BF%E6%95%8F%E5%AE%BD/" rel="next" title="2022开源操作系统训练营总结-pickanameforlove-鹿敏宽">
      2022开源操作系统训练营总结-pickanameforlove-鹿敏宽 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



        </div>
        

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">rcore-os Group</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/blog/lib/anime.min.js"></script>

<script src="/blog/js/utils.js"></script>

<script src="/blog/js/motion.js"></script>


<script src="/blog/js/schemes/muse.js"></script>


<script src="/blog/js/next-boot.js"></script>


  















  

  

  

</body>
</html>
