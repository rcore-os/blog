{%- if page.comments %}
{%- set disqusjs_css_uri = theme.vendors.disqusjs_css or '//cdn.jsdelivr.net/npm/disqusjs@1/dist/disqusjs.css' %}
<link rel="stylesheet" href="{{ url_for(disqusjs_css_uri) }}">

{%- set disqusjs_js_uri = theme.vendors.disqusjs_js or '//cdn.jsdelivr.net/npm/disqusjs@1/dist/disqus.js' %}

<script>
NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
  NexT.utils.getScript('{{ url_for(disqusjs_js_uri) }}', () => {
    window.dsqjs = new DisqusJS({
      api       : '{{ theme.disqusjs.api }}' || 'https://disqus.com/api/',
      apikey    : '{{ theme.disqusjs.apikey }}',
      shortname : '{{ theme.disqusjs.shortname }}',
      url       : {{ page.permalink | safedump }},
      identifier: {{ page.path | safedump }},
      title     : {{ page.title | safedump }},
    });
  }, window.DisqusJS);
});
</script>
{%- endif %}
