---
title: 2024春季开源操作系统训练营第二阶段总结报告-赵剑秋
date: 2024-05-16 18:40:23
tags:
    - author:Qiu233
    - repo:https://github.com/LearningOS/2024s-rcore-Qiu233
---

首先二阶段以第一名拿下了，很开心o(*￣▽￣*)ブ

刚开始那几天由于不了解，不小心看到V3去了，不过收获颇丰，之前没怎么用过gdb这次算是彻底学会了。

第二阶段还学会了很多指令比如readelf、hexdump等等的用法，还有命令行tmux的使用方式。

现在回想起来似乎一路都没有遇到什么特别大的困难，必做题都是比较简单的，除了ch8以外差不多是一天一章的工作量。

ch8确实也有点麻烦，我花了两天才把死锁检测做出来。因为刚开始一直和银行家算法分不清楚，仔细看了书之后3个小时左右就解决了。

最有趣的我觉得是ch4的内存管理和ch5的进程管理。

我在ch5上实现了多核支持，并且在四个hart并行的情况下通过了所有测例，多核支持涉及dtb、thread local storage等等多个方面的知识，还要十分小心各种同步问题。

比如`__switch`中间必须加锁，否则其他hart可能加载还没有保存完毕的`TaskContext`，这个问题我调试了几个小时才找到原因，为了解决专门读了RISC-V的atomic extension，最后用LR/SC解决了问题。

我在ch6上实现了：
* lazy allocation
* demand paging
* fork COW
* mmap文件映射，包括Shared和Private两种模式

算是对内存管理有了一个比较广泛的了解吧，比较可惜的是忙别的去了，没有把页面置换做出来。

到最后选做题也没有做完，不过顺利晋级就很满足了，我最感兴趣的方向是hypervisor，接下来开始准备第三阶段。

